# Next.js 博客项目目录结构详细分析

> 本文档详细分析了 Next.js 博客项目的目录结构，帮助理解每个目录的作用和功能。

---

## 📁 项目根目录

### 配置文件

| 文件名 | 作用 |
|--------|------|
| `next.config.js` | Next.js 核心配置文件，配置 MDX、图片优化、环境变量等 |
| `tailwind.config.js/ts` | Tailwind CSS 配置，定义主题、颜色、字体等样式系统 |
| `tsconfig.json` | TypeScript 编译配置，定义路径别名、编译选项等 |
| `postcss.config.js` | PostCSS 配置，用于处理 CSS（与 Tailwind 配合） |
| `.eslintrc.json` | ESLint 代码规范配置 |
| `components.json` | Shadcn UI 组件配置文件 |
| `plate-components.json` | Plate 编辑器组件配置 |
| `package.json` | 项目依赖和脚本管理 |

### 部署相关

| 文件/目录 | 作用 |
|-----------|------|
| `Dockerfile` | Docker 容器化配置，用于生产环境部署 |
| `.dockerignore` | Docker 构建时忽略的文件 |
| `.github/` | GitHub Actions 工作流配置（CI/CD） |

### 其他

| 文件/目录 | 作用 |
|-----------|------|
| `public/` | 静态资源目录（图片、头像等） |
| `scripts/` | 构建和部署脚本 |
| `.vscode/` | VS Code 编辑器配置 |
| `LICENSE` | 开源协议（MIT） |
| `README.md` | 项目说明文档 |

---

## 📂 src/ 源代码目录

这是项目的核心代码目录，采用 Next.js 14 的 App Router 架构。

---

## 🎯 src/app/ - 应用主目录

Next.js 14 的 App Router 核心目录，包含所有页面、路由和 API。

### 核心文件

| 文件 | 作用 |
|------|------|
| `layout.tsx` | 根布局组件，定义全站通用布局（导航栏、侧边栏等） |
| `page.tsx` | 首页入口文件 |
| `globals.css` | 全局样式文件 |
| `Loading.tsx` | 全局加载状态组件 |
| `not-found.tsx` | 404 页面 |
| `favicon.ico` | 网站图标 |

### 📄 页面路由目录

#### `articles/` - 文章系统
- **功能**: 博客文章的展示和管理
- **包含**:
  - 文章列表页
  - 文章详情页
  - 文章编辑器页面
- **特点**: 支持 Markdown/MDX 渲染、代码高亮、目录生成

#### `album/` - 相册系统
- **功能**: 照片展示和管理
- **包含**:
  - 照片瀑布流展示
  - EXIF 信息提取
  - 图片灯箱预览
- **特点**: 支持图片压缩、元数据展示、地理位置信息

#### `bookmarks/` - 书签收藏
- **功能**: 网站书签收藏和分类管理
- **包含**:
  - 书签列表
  - 分类管理
  - 标签系统
- **特点**: 支持 RSS 订阅、快速搜索

#### `timeline/` - 时间线
- **功能**: 个人动态和内容聚合展示
- **包含**:
  - 文章、项目、推文等内容的时间线视图
  - 支持 Twitter 内容嵌入
- **特点**: 自动聚合多种内容类型，按时间排序

#### `projects/` - 项目展示
- **功能**: 个人项目作品集展示
- **包含**:
  - 项目列表
  - 项目详情
  - 技术栈展示
- **特点**: 支持项目分类、技术标签

#### `stack/` - 技术栈
- **功能**: 展示使用的技术栈和工具
- **包含**:
  - 技术分类（前端、后端、工具等）
  - 技术详情和使用经验
- **特点**: 可视化技术栈展示

#### `friends/` - 友情链接
- **功能**: 友链管理和展示
- **包含**:
  - 友链列表
  - 友链卡片展示
- **特点**: 支持头像、描述、链接等信息

#### `inspirations/` - 灵感收集
- **功能**: 收集和展示灵感、想法
- **包含**:
  - 灵感卡片
  - 分类管理
- **特点**: 类似 Pinterest 的灵感墙

#### `business/` - 商业相关
- **功能**: 商业项目或服务展示
- **特点**: 可能包含商业合作、服务介绍等

#### `fitness/` - 健身记录
- **功能**: 个人健身数据记录和展示
- **特点**: 可能包含运动数据、健身计划等

#### `travel/` - 旅行记录
- **功能**: 旅行游记和照片分享
- **特点**: 可能包含地图、行程、照片等

#### `todos/` - 待办事项
- **功能**: 任务管理系统
- **包含**:
  - 待办列表
  - 任务状态管理
- **特点**: 支持任务分类、优先级设置

#### `workspace/` - 工作空间
- **功能**: 个人工作空间或笔记系统
- **特点**: 可能包含笔记、文档管理等

#### `project-requirements/` - 项目需求
- **功能**: 项目需求文档管理
- **特点**: 可能用于记录和管理项目需求

#### `external-articles/` - 外部文章
- **功能**: 外部文章链接或转载
- **特点**: 区分原创和转载内容

### 🔐 管理和认证

#### `admin/` - 管理后台
- **功能**: 网站内容管理后台
- **包含**:
  - 文章管理（创建、编辑、删除）
  - 书签管理
  - 照片上传和管理
  - 用户管理
  - 数据统计
- **权限**: 需要管理员登录

#### `login/` - 登录页面
- **功能**: 用户认证登录
- **特点**: JWT 认证、安全密码处理

#### `verify/` - 验证页面
- **功能**: 可能用于邮箱验证或其他验证流程

### 🔌 API 路由 (src/app/api/)

所有后端 API 接口，采用 Next.js API Routes。

| API 目录 | 功能 |
|----------|------|
| `articles/` | 文章 CRUD 操作、搜索、统计 |
| `auth/` | 用户认证（登录、注册、JWT 验证） |
| `bookmarks/` | 书签增删改查、分类管理 |
| `photos/` | 照片上传、EXIF 提取、管理 |
| `projects/` | 项目管理 API |
| `timelines/` | 时间线数据聚合 |
| `todos/` | 待办事项管理 |
| `friends/` | 友链管理 |
| `inspirations/` | 灵感收集管理 |
| `stacks/` | 技术栈数据 |
| `work-experience/` | 工作经历数据 |
| `workspaces/` | 工作空间数据 |
| `social-links/` | 社交媒体链接 |
| `rss/` | RSS 订阅生成 |
| `upload/` | 文件上传（支持阿里云 OSS） |
| `exif/` | 图片 EXIF 信息提取 |
| `image-analysis/` | 图片分析（颜色提取等） |
| `proxy-image/` | 图片代理（解决跨域） |
| `proxy-content/` | 内容代理 |
| `screenshot/` | 网页截图服务 |
| `site/` | 网站配置和统计 |
| `captcha/` | 验证码服务 |
| `fitness/` | 健身数据 API |
| `travel/` | 旅行数据 API |
| `demos/` | 演示功能 API |
| `project-requirements/` | 项目需求 API |
| `external-articles/` | 外部文章 API |

### 🛠️ 工具目录

#### `model/` - 数据模型
- **功能**: MongoDB/Mongoose 数据模型定义
- **包含**: 各种数据库 Schema（文章、用户、书签等）

#### `hooks/` - React Hooks
- **功能**: 页面级别的自定义 Hooks
- **注意**: 与 `src/hooks/` 区分，这里是 app 目录专用

#### `utils/` - 工具函数
- **功能**: app 目录专用的工具函数

#### `demos/` - 演示功能
- **功能**: 功能演示或测试页面

---

## 🧩 src/components/ - 组件目录

所有可复用的 React 组件。

### 核心组件

| 组件/目录 | 作用 |
|-----------|------|
| `LayoutWrapper.tsx` | 布局包装器 |
| `SidePanel.tsx` | 侧边栏面板组件（12KB，功能丰富） |
| `LoadingSpinner.tsx` | 加载动画组件 |
| `FriendCard.tsx` | 友链卡片组件 |
| `Table.tsx` | 表格组件 |
| `GoogleTagManagerHead.tsx` | Google 分析头部 |
| `GoogleTagManagerBody.tsx` | Google 分析主体 |

### 组件子目录

#### `HomePage/` - 首页组件
- **包含**: 首页特有的各种组件模块
- **特点**: 包含 14 个子组件，构成首页的各个部分

#### `ui/` - 基础 UI 组件
- **功能**: Shadcn UI 和自定义基础组件
- **包含**:
  - 按钮、输入框、对话框等基础组件
  - 基于 Radix UI 的无障碍组件
- **特点**: 可复用、可定制

#### `customMdRender/` - Markdown 渲染器
- **功能**: 自定义 Markdown 渲染组件
- **包含**:
  - 代码块渲染
  - 表格渲染
  - 图片渲染
  - 链接渲染
  - 自定义语法支持
- **特点**: 支持 GitHub 风格、代码高亮

#### `icons/` - 图标组件
- **功能**: 自定义 SVG 图标组件
- **特点**: 统一管理项目图标

#### `admin/` - 管理后台组件
- **功能**: 后台管理专用组件
- **包含**: 管理界面的各种表单、表格、编辑器等

#### `bookmarks/` - 书签组件
- **功能**: 书签展示相关组件
- **包含**: 书签卡片、分类选择器等

#### `inspirations/` - 灵感组件
- **功能**: 灵感展示相关组件
- **包含**: 灵感卡片、瀑布流布局等

#### `workspace/` - 工作空间组件
- **功能**: 工作空间相关组件

#### `providers/` - Context Providers
- **功能**: React Context 提供者
- **包含**: 主题、认证等全局状态管理

---

## ⚙️ src/config/ - 配置目录

存放项目的各种配置数据。

| 配置文件 | 作用 |
|----------|------|
| `bookmarks.ts` | 书签分类和默认数据配置 |
| `friends.ts` | 友链数据配置（2.4KB） |
| `photos.ts` | 相册配置和默认数据 |
| `projects.ts` | 项目数据配置（2.9KB） |
| `social-links.ts` | 社交媒体链接配置 |
| `stacks.ts` | 技术栈数据配置（4.7KB，详细） |
| `timelines.ts` | 时间线配置 |
| `work-experience.ts` | 工作经历数据 |
| `workspace-items.ts` | 工作空间项目配置 |

**特点**: 
- 集中管理静态配置数据
- 便于修改个人信息
- TypeScript 类型安全

---

## 📚 src/lib/ - 核心库目录

项目的核心功能库。

| 文件 | 作用 |
|------|------|
| `mongodb.ts` | MongoDB 数据库连接管理 |
| `bookmarks.ts` | 书签相关业务逻辑 |
| `utils.ts` | 通用工具函数 |

**特点**: 
- 封装数据库连接
- 提供业务逻辑函数
- 与 `src/utils/` 区分（lib 更偏向核心功能）

---

## 🔧 src/utils/ - 工具函数目录

各种通用工具函数。

| 文件 | 作用 |
|------|------|
| `api-helpers.ts` | API 辅助函数（4.6KB） |
| `auth.ts` | 认证相关工具函数 |
| `db-helpers.ts` | 数据库操作辅助函数（7.5KB，重要） |
| `db-instances.ts` | 数据库实例管理（2.6KB） |
| `heading-utils.ts` | 标题处理工具（目录生成等） |
| `request.ts` | HTTP 请求封装（10.8KB，核心） |
| `serverCache.ts` | 服务端缓存 |
| `text.ts` | 文本处理工具 |
| `time.ts` | 时间格式化工具 |
| `url.ts` | URL 处理工具 |

**特点**: 
- 提供项目通用工具函数
- 封装常用操作
- 提高代码复用性

---

## 🪝 src/hooks/ - 自定义 Hooks

全局可用的 React Hooks。

| Hook | 作用 |
|------|------|
| `useDeviceDetection.ts` | 设备检测（移动端/桌面端） |
| `useInfiniteScroll.ts` | 无限滚动加载（2.4KB） |

**特点**: 
- 封装常用逻辑
- 提高组件复用性

---

## 🗄️ src/store/ - 状态管理

使用 Zustand 进行全局状态管理。

| 文件 | 作用 |
|------|------|
| `site.ts` | 网站全局状态（主题、用户信息等） |

**特点**: 
- 轻量级状态管理
- 替代 Redux
- 简单易用

---

## 📝 src/types/ - 类型定义

TypeScript 类型定义文件。

| 文件 | 作用 |
|------|------|
| `rss.d.ts` | RSS 相关类型定义 |

**特点**: 
- 提供类型安全
- 补充第三方库类型

---

## 🎨 src/styles/ - 样式目录

全局样式文件。

**包含**: 
- 主题变量
- 全局样式
- CSS 工具类

---

## 📄 src/docs/ - 文档目录

项目文档和说明。

**用途**: 
- 开发文档
- API 文档
- 使用说明

---

## 🖼️ public/ - 静态资源

| 资源 | 说明 |
|------|------|
| `avatar.png` | 头像图片（20KB） |
| `example1.jpg` | 示例图片 1（3.4MB） |
| `example2.jpg` | 示例图片 2（3.6MB） |
| `images/` | 其他图片资源 |

**特点**: 
- 直接通过 URL 访问
- 不经过 webpack 处理
- 适合存放图片、字体等静态文件

---

## 🔨 scripts/ - 构建脚本

| 脚本 | 作用 |
|------|------|
| `build-with-env.js` | 带环境变量的构建脚本 |

**用途**: 
- 自动化构建
- 环境配置
- 部署脚本

---

## 📊 目录结构总结

### 按功能分类

#### 1. **核心应用层** (src/app/)
- 页面路由
- API 接口
- 数据模型

#### 2. **组件层** (src/components/)
- UI 组件
- 业务组件
- 布局组件

#### 3. **数据层** (src/lib/, src/utils/)
- 数据库操作
- API 调用
- 工具函数

#### 4. **配置层** (src/config/)
- 静态数据
- 配置信息

#### 5. **状态层** (src/store/, src/hooks/)
- 全局状态
- 自定义 Hooks

#### 6. **类型层** (src/types/)
- TypeScript 类型定义

---

## 🎯 个性化修改建议

### 必须修改的配置文件

1. **src/config/friends.ts** - 修改友链信息
2. **src/config/projects.ts** - 修改项目展示
3. **src/config/stacks.ts** - 修改技术栈
4. **src/config/work-experience.ts** - 修改工作经历
5. **src/config/social-links.ts** - 修改社交媒体链接
6. **public/avatar.png** - 替换头像

### 可选修改

1. **src/app/layout.tsx** - 修改网站标题、描述
2. **src/app/globals.css** - 修改全局样式和主题色
3. **tailwind.config.ts** - 修改 Tailwind 主题配置
4. **src/config/bookmarks.ts** - 添加书签分类
5. **src/config/photos.ts** - 配置相册

### 数据库相关

1. **配置 MongoDB 连接** - .env.local
2. **初始化数据** - 通过管理后台添加内容
3. **配置 OSS** - 如需图片上传功能

---

## 🚀 快速上手流程

1. **安装依赖**: `pnpm install`
2. **配置环境变量**: 创建 `.env.local`
3. **修改个人信息**: 编辑 `src/config/` 下的配置文件
4. **替换静态资源**: 更新 `public/` 下的图片
5. **启动开发服务器**: `pnpm dev`
6. **访问管理后台**: `/admin` (需先配置认证)
7. **添加内容**: 通过后台添加文章、照片等

---

## 📌 技术架构特点

### 前端技术栈
- **框架**: Next.js 14 (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS + Shadcn UI
- **状态管理**: Zustand
- **编辑器**: Plate + Toast UI

### 后端技术栈
- **API**: Next.js API Routes
- **数据库**: MongoDB + Mongoose
- **认证**: JWT (jose)
- **存储**: 阿里云 OSS
- **图片处理**: Sharp + Exiftool

### 内容处理
- **Markdown**: MDX + Rehype + Remark
- **代码高亮**: Prism.js + Shiki
- **RSS**: RSS 生成器

---

## 💡 开发建议

1. **模块化开发**: 每个功能模块独立，便于维护
2. **类型安全**: 充分利用 TypeScript 类型系统
3. **组件复用**: 优先使用 Shadcn UI 和自定义组件
4. **性能优化**: 使用 Next.js 的图片优化、代码分割等特性
5. **SEO 优化**: 利用 Next.js 的 metadata API
6. **响应式设计**: 确保移动端和桌面端体验一致

---

## 📖 相关文档

- [Next.js 官方文档](https://nextjs.org/docs)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [Shadcn UI 文档](https://ui.shadcn.com)
- [MongoDB 文档](https://www.mongodb.com/docs)
- [Plate 编辑器文档](https://platejs.org)

---

**最后更新**: 2025-12-12
**项目版本**: 0.1.0
**维护者**: 根据实际情况修改
